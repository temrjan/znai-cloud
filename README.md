# AI-Avangard - Multi-tenant RAG Platform

**Ğ”ĞµĞ¼Ğ¾-Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ±Ğ°Ğ· Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹ Ñ AI Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ¾Ğ¼**

---

## ğŸ“‹ ĞĞ±Ğ·Ğ¾Ñ€ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

AI-Avangard - ÑÑ‚Ğ¾ SaaS Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ±Ğ°Ğ· Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹ Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ RAG (Retrieval-Augmented Generation). ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ‚ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹, Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ñ… Ğ¸ Ğ·Ğ°Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ AI Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ñƒ.

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- âœ… Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ĞµĞ¼ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼
- âœ… Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ¾ 5 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² (Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾)
- âœ… ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ±Ğ°Ğ·Ğ° Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹ (Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ)
- âœ… RAG-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ Ñ†Ğ¸Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ²
- âœ… ĞšĞ²Ğ¾Ñ‚Ñ‹: 5 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ², 100 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²/Ğ´ĞµĞ½ÑŒ
- âœ… UI Ğ² ÑÑ‚Ğ¸Ğ»Ğµ GitHub (Primer React)

### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

**Backend:**
- Python 3.12+
- FastAPI (async web framework)
- PostgreSQL 16 (Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸, Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)
- Redis 7.x (ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, rate limiting)
- Qdrant 1.12+ (Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ğ°Ñ Ğ‘Ğ”)
- OpenAI API (embeddings + GPT-4o)
- LlamaIndex (RAG orchestration)

**Frontend:**
- React 18 + TypeScript
- Vite 6 (build tool)
- Primer React (GitHub UI components)
- React Router v6
- Axios (HTTP client)

**DevOps:**
- Nginx (reverse proxy + SSL)
- systemd (process management)
- pytest (backend tests)
- vitest (frontend tests)

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Internet (HTTPS)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Nginx (Reverse Proxy + SSL Termination)                â”‚
â”‚  - Static: /frontend/dist                               â”‚
â”‚  - API: proxy â†’ localhost:8000                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FastAPI Backend (Python)                               â”‚
â”‚  â”œâ”€â”€ Routes (auth, chat, documents, admin)              â”‚
â”‚  â”œâ”€â”€ Services (qdrant, indexing, llm)                   â”‚
â”‚  â”œâ”€â”€ Models (SQLAlchemy ORM)                            â”‚
â”‚  â””â”€â”€ Middleware (auth, rate limiting)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚          â”‚          â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ PG    â”‚  â”‚Redis â”‚  â”‚ Qdrant â”‚
   â”‚ SQL   â”‚  â”‚Cache â”‚  â”‚ Vector â”‚
   â”‚       â”‚  â”‚      â”‚  â”‚   DB   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                            â”‚
                        â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
                        â”‚ OpenAI â”‚
                        â”‚  API   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
/home/temrjan/znai-cloud/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ARCHITECTURE.md          # ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°
â”‚   â”œâ”€â”€ API.md                   # API Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ DEPLOYMENT.md            # Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ¿Ğ¾ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ
â”‚   â””â”€â”€ TESTING.md               # Ğ ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ alembic/                 # ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ‘Ğ”
â”‚   â”‚   â””â”€â”€ versions/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py              # FastAPI app
â”‚   â”‚   â”œâ”€â”€ config.py            # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ models/              # SQLAlchemy models
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ document.py
â”‚   â”‚   â”‚   â””â”€â”€ quota.py
â”‚   â”‚   â”œâ”€â”€ schemas/             # Pydantic schemas
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ document.py
â”‚   â”‚   â”‚   â””â”€â”€ chat.py
â”‚   â”‚   â”œâ”€â”€ routes/              # API endpoints
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py
â”‚   â”‚   â”‚   â”œâ”€â”€ documents.py
â”‚   â”‚   â”‚   â””â”€â”€ admin.py
â”‚   â”‚   â”œâ”€â”€ services/            # Business logic
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ qdrant_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ indexing_service.py
â”‚   â”‚   â”‚   â””â”€â”€ llm_service.py
â”‚   â”‚   â”œâ”€â”€ middleware/          # Middleware
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”‚   â””â”€â”€ rate_limit.py
â”‚   â”‚   â””â”€â”€ utils/               # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ security.py
â”‚   â”‚       â””â”€â”€ validators.py
â”‚   â”œâ”€â”€ tests/                   # Ğ¢ĞµÑÑ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ conftest.py          # Pytest fixtures
â”‚   â”‚   â”œâ”€â”€ unit/                # Unit tests
â”‚   â”‚   â”‚   â”œâ”€â”€ test_auth.py
â”‚   â”‚   â”‚   â”œâ”€â”€ test_qdrant.py
â”‚   â”‚   â”‚   â””â”€â”€ test_indexing.py
â”‚   â”‚   â””â”€â”€ integration/         # Integration tests
â”‚   â”‚       â”œâ”€â”€ test_api.py
â”‚   â”‚       â””â”€â”€ test_rag.py
â”‚   â”œâ”€â”€ requirements.txt         # Production Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
â”‚   â”œâ”€â”€ requirements-dev.txt     # Dev Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
â”‚   â”œâ”€â”€ pytest.ini               # Pytest ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ alembic.ini             # Alembic ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â””â”€â”€ pyproject.toml          # Python Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”‚   â””â”€â”€ AppLayout.tsx    # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ layout (GitHub-style)
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentsPage.tsx
â”‚   â”‚   â”‚   â””â”€â”€ AdminPage.tsx
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx       # GitHub Header
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx      # GitHub Sidebar
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx  # Comment-style message
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ QuotaBadge.tsx
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ api.ts           # API client
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â””â”€â”€ useDocuments.ts
â”‚   â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”‚   â””â”€â”€ AuthContext.tsx
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ formatters.ts
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ ChatMessage.test.tsx
â”‚   â”‚   â””â”€â”€ setup.ts
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â””â”€â”€ vitest.config.ts        # Vitest ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ nginx/
â”‚   â”‚   â””â”€â”€ znai-cloud.conf    # Nginx ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
â”‚   â”œâ”€â”€ systemd/
â”‚   â”‚   â”œâ”€â”€ znai-cloud-backend.service
â”‚   â”‚   â””â”€â”€ qdrant.service
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ setup.sh            # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°
â”‚       â””â”€â”€ backup.sh           # Ğ‘ÑĞºĞ°Ğ¿ ÑĞºÑ€Ğ¸Ğ¿Ñ‚
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ users/                  # Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
â”‚   â”‚   â”œâ”€â”€ 1/
â”‚   â”‚   â”œâ”€â”€ 2/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ qdrant/                 # Qdrant Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
â”‚
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ backend.log
â”‚   â””â”€â”€ nginx/
â”‚
â”œâ”€â”€ .env.example                # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”œâ”€â”€ .env                        # Ğ ĞµĞ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ğ½Ğµ Ğ² git)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ Makefile                    # ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
â””â”€â”€ README.md                   # Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ»
```

---

## ğŸ—„ï¸ Ğ¡Ñ…ĞµĞ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### PostgreSQL

```sql
-- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸
users:
  id: SERIAL PRIMARY KEY
  email: VARCHAR(255) UNIQUE NOT NULL
  password_hash: VARCHAR(255) NOT NULL
  full_name: VARCHAR(255)
  status: ENUM('pending', 'approved', 'rejected') DEFAULT 'pending'
  role: ENUM('user', 'admin') DEFAULT 'user'
  approved_by: INT REFERENCES users(id)
  created_at: TIMESTAMP DEFAULT NOW()
  approved_at: TIMESTAMP

-- ĞšĞ²Ğ¾Ñ‚Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
user_quotas:
  user_id: INT PRIMARY KEY REFERENCES users(id)
  max_documents: INT DEFAULT 5
  current_documents: INT DEFAULT 0
  max_queries_daily: INT DEFAULT 100
  queries_today: INT DEFAULT 0
  last_query_date: DATE

-- Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹
documents:
  id: UUID PRIMARY KEY
  user_id: INT REFERENCES users(id)
  filename: VARCHAR(255) NOT NULL
  file_size: BIGINT
  file_hash: VARCHAR(64)
  chunks_count: INT DEFAULT 0
  status: ENUM('processing', 'indexed', 'failed')
  uploaded_at: TIMESTAMP DEFAULT NOW()
  indexed_at: TIMESTAMP
  UNIQUE(user_id, file_hash)

-- Ğ›Ğ¾Ğ³ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
query_logs:
  id: BIGSERIAL PRIMARY KEY
  user_id: INT REFERENCES users(id)
  query_text: TEXT
  response_time_ms: INT
  sources_count: INT
  created_at: TIMESTAMP DEFAULT NOW()
```

### Qdrant

```
Collection: ai_avangard_main
  vectors: 3072 dimensions (text-embedding-3-large)
  payload:
    - user_id: INT (indexed)
    - doc_id: UUID
    - filename: STRING
    - chunk_index: INT
    - text: STRING
    - created_at: DATETIME
```

---

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

### Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ:**
- CPU: 2 cores
- RAM: 4 GB
- Disk: 20 GB
- OS: Ubuntu 22.04+

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğµ (100 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹):**
- CPU: 4 cores
- RAM: 8 GB
- Disk: 50 GB SSD
- Bandwidth: 100 Mbps

### ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

Ğ¡Ğ¼. `.env.example` Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¸ÑĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸.

**ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ:**
```env
OPENAI_API_KEY=sk-proj-xxxxx
POSTGRES_PASSWORD=secure_password
JWT_SECRET_KEY=very_long_random_string
```

---

## ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### 1. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (ÑƒĞ¶Ğµ ÑĞ´ĞµĞ»Ğ°Ğ½Ğ¾)

```bash
cd /home/temrjan/znai-cloud
```

### 2. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ (ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³)

```bash
# Ğ‘ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
make setup
```

### 3. ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```bash
cp .env.example .env
nano .env  # Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ API ĞºĞ»ÑÑ‡Ğ¸
```

### 4. Ğ—Ğ°Ğ¿ÑƒÑĞº

```bash
make run
```

---

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Backend Ñ‚ĞµÑÑ‚Ñ‹

```bash
cd backend
pytest                          # Ğ’ÑĞµ Ñ‚ĞµÑÑ‚Ñ‹
pytest tests/unit              # Unit Ñ‚ĞµÑÑ‚Ñ‹
pytest tests/integration       # Integration Ñ‚ĞµÑÑ‚Ñ‹
pytest --cov=app               # Ğ¡ coverage
```

### Frontend Ñ‚ĞµÑÑ‚Ñ‹

```bash
cd frontend
npm test                       # Ğ’ÑĞµ Ñ‚ĞµÑÑ‚Ñ‹
npm test -- --coverage        # Ğ¡ coverage
```

---

## ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

**Ğ›Ğ¾Ğ³Ğ¸:**
```bash
tail -f logs/backend.log       # Backend Ğ»Ğ¾Ğ³Ğ¸
sudo tail -f /var/log/nginx/access.log  # Nginx Ğ»Ğ¾Ğ³Ğ¸
```

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²:**
```bash
systemctl status znai-cloud-backend
systemctl status qdrant
systemctl status postgresql
systemctl status redis
```

**ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸:**
```bash
curl http://localhost:8000/health
curl http://localhost:8000/admin/stats
```

---

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

- âœ… JWT Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ (HS256)
- âœ… Password hashing (bcrypt)
- âœ… Rate limiting (Redis)
- âœ… CORS protection
- âœ… SQL injection protection (SQLAlchemy)
- âœ… XSS protection (CSP headers)
- âœ… User data isolation (Qdrant filters)

---

## ğŸ“ˆ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ

**Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ ĞµĞ¼ĞºĞ¾ÑÑ‚ÑŒ:**
- 100 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
- 500 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² (100 Ã— 5)
- ~25,000 Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²
- ~300 MB RAM Ğ´Ğ»Ñ Qdrant

**Ğ”Ğ»Ñ Ñ€Ğ¾ÑÑ‚Ğ°:**
- Horizontal scaling: Nginx load balancer
- Database: PostgreSQL read replicas
- Cache: Redis cluster
- Vectors: Qdrant distributed mode

---

## ğŸ“ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

Proprietary - AI-Avangard Â© 2025

---

## ğŸ‘¥ ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°

- **Tech Lead**: temrjan
- **Email**: x.temrjan@gmail.com

---

**Version**: 1.0.0
**Status**: ğŸš§ In Development
**Last Updated**: 2025-11-20
