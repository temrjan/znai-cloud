# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç AI-Avangard

## –ü–æ—à–∞–≥–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd /home/temrjan/znai-cloud
sudo ./infrastructure/scripts/setup.sh
```

**–ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è:**
- PostgreSQL 16
- Redis 7.x
- Qdrant 1.12
- Nginx
- Python 3.12 venv

**–í—Ä–µ–º—è:** ~5-10 –º–∏–Ω—É—Ç

---

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞

```bash
make install-deps
```

**–ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è:**
- Python –ø–∞–∫–µ—Ç—ã (FastAPI, SQLAlchemy, LlamaIndex, etc.)
- Node.js –ø–∞–∫–µ—Ç—ã (React, Primer, Vite, etc.)

**–í—Ä–µ–º—è:** ~3-5 –º–∏–Ω—É—Ç

---

### –®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:**
```env
OPENAI_API_KEY=sk-proj-xxxxx  # –í–∞—à OpenAI API –∫–ª—é—á

# –û—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

**–ì–¥–µ –≤–∑—è—Ç—å OpenAI API –∫–ª—é—á:**
https://platform.openai.com/api-keys

---

### –®–∞–≥ 4: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make db-migrate
```

**–ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ:**
- –¢–∞–±–ª–∏—Ü—ã: users, user_quotas, documents, query_logs
- –ü–µ—Ä–≤–∏—á–Ω—ã–π admin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

---

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç A: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)

```bash
# –í –æ–¥–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - Backend
make run-backend

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - Frontend
make run-frontend
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –í—Å—ë —Å—Ä–∞–∑—É

```bash
make run
```

**–û—Ç–∫—Ä–æ–µ—Ç—Å—è:**
- Frontend: http://localhost:5173
- Backend API: http://localhost:8000
- API Docs: http://localhost:8000/docs

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã

```bash
make services-status
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úì PostgreSQL: running
‚úì Redis: running
‚úì Qdrant: running
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API

```bash
curl http://localhost:8000/health
```

–û—Ç–≤–µ—Ç:
```json
{
  "status": "healthy",
  "postgres": true,
  "qdrant": true,
  "redis": true
}
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å frontend

–û—Ç–∫—Ä—ã—Ç—å http://localhost:5173

–î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞ –≤ —Å—Ç–∏–ª–µ GitHub.

---

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º

### Chrome DevTools:

1. F12 (–æ—Ç–∫—Ä—ã—Ç—å DevTools)
2. Ctrl+Shift+M (toggle device toolbar)
3. –í—ã–±—Ä–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: iPhone 12 Pro, Galaxy S20, etc.

### –†–µ–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:

1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ç–µ–ª–µ—Ñ–æ–Ω –≤ —Ç–æ–π –∂–µ —Å–µ—Ç–∏
2. –£–∑–Ω–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä–∞: `ip addr show`
3. –û—Ç–∫—Ä—ã—Ç—å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ: `http://YOUR_SERVER_IP:5173`

---

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# Backend —Ç–µ—Å—Ç—ã
make test-backend

# Frontend —Ç–µ—Å—Ç—ã
make test-frontend

# –í—Å–µ —Ç–µ—Å—Ç—ã
make test
```

---

## üìã –ü–µ—Ä–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:5173/register
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
   - Email: test@example.com
   - Password: password123
   - Full Name: Test User
3. –ù–∞–∂–∞—Ç—å "Register"
4. –°—Ç–∞—Ç—É—Å: "Pending admin approval"

### 2. –û–¥–æ–±—Ä–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ API**
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ pending users
curl http://localhost:8000/admin/users/pending \
  -H "Authorization: Bearer ADMIN_TOKEN"

# –û–¥–æ–±—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -X POST http://localhost:8000/admin/users/1/approve \
  -H "Authorization: Bearer ADMIN_TOKEN"
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)**
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
psql -U ai_avangard_admin -d ai_avangard

# –û–¥–æ–±—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
UPDATE users SET status = 'approved', approved_at = NOW() WHERE id = 1;
```

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

1. –í–æ–π—Ç–∏ –∫–∞–∫ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É Documents
3. Drag & drop —Ñ–∞–π–ª (.pdf, .txt, .md, .docx)
4. –î–æ–∂–¥–∞—Ç—å—Å—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (~5-10 —Å–µ–∫—É–Ω–¥)
5. Quota: 1/5 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### 4. –ó–∞–ø—Ä–æ—Å –∫ RAG

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É Chat
2. –í–≤–µ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å: "–û —á—ë–º —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç?"
3. –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç —Å —Ü–∏—Ç–∞—Ç–∞–º–∏

---

## üîß Troubleshooting

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -f logs/backend.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
lsof -i :8000

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
./venv/bin/pip install -r backend/requirements.txt --force-reinstall
```

### Frontend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
cd frontend
rm -rf node_modules .vite
npm install

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
lsof -i :5173
```

### Qdrant –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status qdrant

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart qdrant

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
sudo journalctl -u qdrant -n 50
```

### PostgreSQL –æ—à–∏–±–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql -U ai_avangard_admin -d ai_avangard -h localhost

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î (WARNING: —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ)
make db-reset
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
make help

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
make health-check

# –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–µ–π
make clean

# –ë—ç–∫–∞–ø –¥–∞–Ω–Ω—ã—Ö
make backup

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make logs-backend
make logs-qdrant
make logs-postgres
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
2. ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
3. ‚úÖ –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç

**–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:**
- –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Å–º. docs/ARCHITECTURE.md)
- –ù–∞–ø–∏—Å–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω –¥–µ–ø–ª–æ–π
- –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## üÜò –ü–æ–º–æ—â—å

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- README.md - –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
- ARCHITECTURE.md - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- API.md - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- Email: x.temrjan@gmail.com
- GitHub: temrjan/znai-cloud

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!** üéâ
